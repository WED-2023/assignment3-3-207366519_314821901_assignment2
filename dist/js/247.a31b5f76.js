"use strict";(self["webpackChunkassignment3_3_frontend_main"]=self["webpackChunkassignment3_3_frontend_main"]||[]).push([[247],{70782:(e,n,a)=>{a.r(n),a.d(n,{default:()=>N});var t=a(56768),i={class:"container"},s={key:0,class:"row"},r={class:"card h-100"},o={key:1,class:"no-results-card text-center"},u={key:2,class:"text-center my-5"},l=["src"],c={key:3,class:"text-center my-5"},d=["src"];function p(e,n,a,p,h,v){var g=(0,t.g2)("SearchBox"),m=(0,t.g2)("RecipePreview");return(0,t.uX)(),(0,t.CE)("div",i,[n[3]||(n[3]=(0,t.Lk)("h1",{class:"title"},"Search Page",-1)),(0,t.bF)(g,{onResultsFound:p.onResultsFound,onLoadingStatus:p.onLoadingStatus},null,8,["onResultsFound","onLoadingStatus"]),p.recipesFromChild.length>0?((0,t.uX)(),(0,t.CE)("div",s,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(p.recipesFromChild,(function(e){return(0,t.uX)(),(0,t.CE)("div",{key:e.id,class:"col-sm-6 col-md-4 col-lg-3 mb-4"},[(0,t.Lk)("div",r,[(0,t.bF)(m,{class:"recipePreview card-body",recipe:e,onUpdatePopularityIncrease:p.increasePopularity,onUpdatePopularityDecrease:p.decreasePopularity,onUpdateFavorite:p.updateFavorite},null,8,["recipe","onUpdatePopularityIncrease","onUpdatePopularityDecrease","onUpdateFavorite"])])])})),128))])):p.hasSearched?((0,t.uX)(),(0,t.CE)("div",o,n[0]||(n[0]=[(0,t.Lk)("i",{class:"bi bi-emoji-frown icon-empty mb-3"},null,-1),(0,t.Lk)("h5",null,"No recipes found",-1),(0,t.Lk)("p",{class:"text-muted"},"Try searching with different ingredients or keywords.",-1)]))):(0,t.Q3)("",!0),p.hasSearched||p.isLoading?p.isLoading?((0,t.uX)(),(0,t.CE)("div",c,[(0,t.Lk)("img",{src:p.searchPageLogo,alt:"Loading",class:"search-illustration-loading"},null,8,d),n[2]||(n[2]=(0,t.Lk)("h5",{class:"mt-3"},"Looking for delicious recipes...",-1))])):(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",u,[(0,t.Lk)("img",{src:p.searchPageLogo,alt:"Search",style:{"max-width":"250px","margin-top":"100px"}},null,8,l),n[1]||(n[1]=(0,t.Lk)("h5",{class:"mt-3"},"Start by searching for a recipe!",-1))]))])}var h=a(74721),v=(a(50113),a(60739),a(18111),a(20116),a(33110),a(79432),a(26099),a(90144)),g=a(45130),m=a(24232),f={class:"search-box container my-5"},L={class:"d-flex flex-wrap align-items-center gap-2 justify-content-center bg-white p-3 rounded shadow-sm"},k={class:"flex-grow-1"},y={class:"input-group"},S=["value"],b=["value"],_=["value"],C=["disabled"],x={key:0},w={key:1,class:"d-flex align-items-center gap-2"};function P(e,n,a,i,s,r){return(0,t.uX)(),(0,t.CE)("div",f,[(0,t.Lk)("div",L,[(0,t.Lk)("div",k,[(0,t.Lk)("div",y,[(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control rounded-pill px-4",placeholder:"Search Recipes","onUpdate:modelValue":n[0]||(n[0]=function(e){return i.state.search_input=e})},null,512),[[g.Jo,i.state.search_input]])])]),(0,t.Lk)("div",null,[(0,t.bo)((0,t.Lk)("select",{class:"form-select rounded-pill px-4","onUpdate:modelValue":n[1]||(n[1]=function(e){return i.state.cuisine=e})},[n[6]||(n[6]=(0,t.Lk)("option",{value:""},"Cuisine",-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(i.cuisines,(function(e){return(0,t.uX)(),(0,t.CE)("option",{key:e,value:e},(0,m.v_)(e),9,S)})),128))],512),[[g.u1,i.state.cuisine]])]),(0,t.Lk)("div",null,[(0,t.bo)((0,t.Lk)("select",{class:"form-select rounded-pill px-4","onUpdate:modelValue":n[2]||(n[2]=function(e){return i.state.diet=e})},[n[7]||(n[7]=(0,t.Lk)("option",{value:""},"Diet",-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(i.diets,(function(e){return(0,t.uX)(),(0,t.CE)("option",{key:e,value:e},(0,m.v_)(e),9,b)})),128))],512),[[g.u1,i.state.diet]])]),(0,t.Lk)("div",null,[(0,t.bo)((0,t.Lk)("select",{class:"form-select rounded-pill px-4","onUpdate:modelValue":n[3]||(n[3]=function(e){return i.state.intolerances=e})},[n[8]||(n[8]=(0,t.Lk)("option",{value:""},"Intolerances",-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(i.intolerances,(function(e){return(0,t.uX)(),(0,t.CE)("option",{key:e,value:e},(0,m.v_)(e),9,_)})),128))],512),[[g.u1,i.state.intolerances]])]),(0,t.Lk)("div",null,[(0,t.bo)((0,t.Lk)("select",{class:"form-select rounded-pill px-4","onUpdate:modelValue":n[4]||(n[4]=function(e){return i.state.results_amount=e})},n[9]||(n[9]=[(0,t.Lk)("option",{value:"5"},"5 results",-1),(0,t.Lk)("option",{value:"10"},"10 results",-1),(0,t.Lk)("option",{value:"15"},"15 results",-1)]),512),[[g.u1,i.state.results_amount]])]),(0,t.Lk)("div",null,[(0,t.Lk)("button",{class:"btn btn-warning rounded-pill px-4 py-2 d-flex align-items-center",onClick:n[5]||(n[5]=function(){return i.OnSubmit&&i.OnSubmit.apply(i,arguments)}),disabled:i.state.isLoading},[i.state.isLoading?((0,t.uX)(),(0,t.CE)("span",w,n[11]||(n[11]=[(0,t.Lk)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),(0,t.eW)(" Loading... ")]))):((0,t.uX)(),(0,t.CE)("span",x,n[10]||(n[10]=[(0,t.Lk)("i",{class:"bi bi-search me-2"},null,-1),(0,t.eW)(" Search ")])))],8,C)])])])}var E=a(20908),F=a(30388),I=(a(44114),a(27411));const X={name:"SearchBox",setup:function(e,n){var a=n.emit,i=(0,v.Kh)({search_input:"",results_amount:"5",cuisine:"",diet:"",intolerances:"",isLoading:!1,recipes:[]}),s=localStorage.getItem("lastSearchInput");if(s){var r=JSON.parse(s);i.search_input=r.search_input||"",i.results_amount=r.results_amount||"5",i.cuisine=r.cuisine||"",i.diet=r.diet||"",i.intolerances=r.intolerances||""}(0,t.wB)((function(){return i.isLoading}),(function(e){a("loading-status",e)}));var o=["African","Asian","American","British","Cajun","Caribbean","Chinese","Eastern European","European","French","German","Greek","Indian","Irish","Italian","Japanese","Jewish","Korean","Latin American","Mediterranean","Mexican","Middle Eastern","Nordic","Southern","Spanish","Thai","Vietnamese"],u=["Gluten Free","Ketogenic","Vegetarian","Lacto-Vegetarian","Ovo-Vegetarian","Vegan","Pescetarian","Paleo","Primal","Low FODMAP","Whole30"],l=["Dairy","Egg","Gluten","Grain","Peanut","Seafood","Sesame","Shellfish","Soy","Sulfite","Tree Nut","Wheat"],c=(0,I.dj)(),d=function(){var e=(0,F.A)((0,E.A)().m((function e(){var n,t,s;return(0,E.A)().w((function(e){while(1)switch(e.n){case 0:return i.isLoading=!0,e.p=1,e.n=2,window.axios.get("/recipes/search",{params:{query:i.search_input,number:i.results_amount,cuisine:i.cuisine,diet:i.diet,intolerance:i.intolerances}});case 2:t=e.v,s=t.data,i.recipes=[],(n=i.recipes).push.apply(n,(0,h.A)(s)),console.log("before Emitting recipes:",i.recipes),a("results-found",(0,h.A)(i.recipes)),localStorage.setItem("lastSearchInput",JSON.stringify({search_input:i.search_input,results_amount:i.results_amount,cuisine:i.cuisine,diet:i.diet,intolerances:i.intolerances})),e.n=4;break;case 3:e.p=3,e.v,c.error("Invalid Search, Please check your input.");case 4:return e.p=4,i.isLoading=!1,e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])})));return function(){return e.apply(this,arguments)}}();return{state:i,cuisines:o,diets:u,intolerances:l,OnSubmit:d}}};var A=a(71241);const R=(0,A.A)(X,[["render",P],["__scopeId","data-v-35d7918e"]]),U=R;var V=a(49330);const K=a.p+"img/searchPageLogo.eb4055c5.jpg",O={name:"SearchPage",components:{SearchBox:U,RecipePreview:V.A},setup:function(){var e=(0,v.KR)([]),n=(0,v.KR)(!1),a=(0,v.KR)(!1),i=function(e){a.value=e},s=function(){localStorage.setItem("lastSearchResults",JSON.stringify(e.value))},r=function(a){e.value=(0,h.A)(a),n.value=!0,s()},o=function(n){var a=e.value.find((function(e){return e.id===n}));a&&(a.popularity++,s())},u=function(n){var a=e.value.find((function(e){return e.id===n}));a&&a.popularity>0&&(a.popularity--,s())},l=function(n){var a=n.id,t=n.isFavorite,i=e.value.find((function(e){return e.id===a}));i&&(i.isFavoriteRecipe=t,s())};return(0,t.sV)((function(){var a=localStorage.getItem("lastSearchResults");a&&(e.value=JSON.parse(a),n.value=!0)})),{recipesFromChild:e,onResultsFound:r,hasSearched:n,increasePopularity:o,decreasePopularity:u,updateFavorite:l,isLoading:a,onLoadingStatus:i,searchPageLogo:K}}},J=(0,A.A)(O,[["render",p],["__scopeId","data-v-04bc6d8c"]]),N=J}}]);
//# sourceMappingURL=247.a31b5f76.js.map