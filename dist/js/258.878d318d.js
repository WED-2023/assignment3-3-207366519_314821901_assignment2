"use strict";(self["webpackChunkassignment3_3_frontend_main"]=self["webpackChunkassignment3_3_frontend_main"]||[]).push([[258,953],{29953:(e,n,r)=>{r.r(n),r.d(n,{default:()=>R});var i=r(56768),t=r(24232),s={class:"container"},a={key:0},c={class:"recipe-header mt-3 mb-4"},l=["src"],u={class:"recipe-body"},o={class:"wrapper"},p={class:"wrapped"},d={class:"mb-3"},v={class:"d-flex align-items-center"},g={key:0,class:"bi bi-leaf icon-vegan",title:"Vegan"},f={key:1,class:"bi bi-egg-fried icon-vegetarian",title:"Vegetarian"},h=["title"],k={class:"wrapped"};function m(e,n,r,m,y,w){return(0,i.uX)(),(0,i.CE)("div",s,[y.recipe?((0,i.uX)(),(0,i.CE)("div",a,[(0,i.Lk)("div",c,[(0,i.Lk)("h1",null,(0,t.v_)(y.recipe.title),1),(0,i.Lk)("img",{src:y.recipe.image,class:"center"},null,8,l)]),(0,i.Lk)("div",u,[(0,i.Lk)("div",o,[(0,i.Lk)("div",p,[(0,i.Lk)("div",d,[(0,i.Lk)("div",null,"Ready in "+(0,t.v_)(y.recipe.readyInMinutes)+" minutes",1),(0,i.Lk)("div",null,"Likes: "+(0,t.v_)(y.recipe.popularity)+" likes",1),(0,i.Lk)("div",null,"Servings: "+(0,t.v_)(y.recipe.servings)+" servings",1),(0,i.Lk)("div",v,[y.recipe.vegan?((0,i.uX)(),(0,i.CE)("i",g)):(0,i.Q3)("",!0),y.recipe.vegetarian?((0,i.uX)(),(0,i.CE)("i",f)):(0,i.Q3)("",!0),(0,i.Lk)("i",{class:"bi bi-flower1 icon-glutenfree",title:y.recipe.glutenFree?"Gluten-Free":"Contains Gluten",style:(0,t.Tr)({color:y.recipe.glutenFree?"#4caf50":"#ff5252"})},null,12,h)])]),n[0]||(n[0]=(0,i.Lk)("strong",null,"Ingredients:",-1)),(0,i.Lk)("ul",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(y.recipe.extendedIngredients,(function(e,n){return(0,i.uX)(),(0,i.CE)("li",{key:n+"_"+e.id},(0,t.v_)(e.original),1)})),128))])]),(0,i.Lk)("div",k,[n[1]||(n[1]=(0,i.Lk)("strong",null,"Instructions:",-1)),(0,i.Lk)("ol",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(y.recipe._instructions,(function(e){return(0,i.uX)(),(0,i.CE)("li",{key:e.number},(0,t.v_)(e.step),1)})),128))])])])])])):(0,i.Q3)("",!0)])}var y=r(41034),w=r(20908),I=r(30388);r(78350),r(62062),r(30237),r(62010),r(18111),r(30531),r(61701),r(79432),r(26099),r(27495),r(25440);const b={props:{recipeProp:{type:Object,default:null}},data:function(){return{recipe:null}},watch:{recipeProp:{handler:function(e){e&&this.processRecipeData(e)},immediate:!0}},created:function(){var e=this;return(0,I.A)((0,w.A)().m((function n(){var r,i,t,s,a;return(0,w.A)().w((function(n){while(1)switch(n.n){case 0:if(console.log("Created hook called"),e.recipeProp){n.n=6;break}n.p=1,r=null;try{i=localStorage.getItem("currentFullViewRecipe"),r=i?JSON.parse(i):null}catch(c){r=null}if(r){n.n=4;break}return t=e.$route.params.recipeId,n.n=2,e.axios.get(e.$root.store.server_domain+"/recipes/searchById/"+t);case 2:if(s=n.v,200===s.status&&s.data){n.n=3;break}return e.$router.replace("/NotFound"),n.a(2);case 3:r=s.data;case 4:e.processRecipeData(r),n.n=6;break;case 5:n.p=5,a=n.v,console.log("Unexpected error:",a),e.$router.replace("/NotFound");case 6:return n.a(2)}}),n,null,[[1,5]])})))()},methods:{processRecipeData:function(e){var n,r=e.id,i=e.analyzedInstructions,t=e.extendedIngredients,s=e.popularity,a=e.readyInMinutes,c=e.image,l=e.title,u=e.servings,o=e.vegan,p=e.vegetarian,d=e.glutenFree,v=e.internal;try{n="string"===typeof i?JSON.parse(i):i}catch(f){console.warn("Failed to parse analyzedInstructions:",f),n=[]}var g=n.flatMap((function(e){return e.steps.map((function(n){return(0,y.A)((0,y.A)({},n),{},{step:(e.name?e.name+": ":"")+n.step})}))}));this.recipe={_instructions:g,analyzedInstructions:i,extendedIngredients:t,popularity:s,readyInMinutes:a,image:c,title:l,servings:u,vegan:o,vegetarian:p,glutenFree:d},window.store.username&&(console.log("entered to add to viewed recipes"),this.addToViewedRecipes(r,v))},addToViewedRecipes:function(e,n){var r=this;return(0,I.A)((0,w.A)().m((function i(){return(0,w.A)().w((function(i){while(1)switch(i.n){case 0:return i.n=1,r.axios.post(r.$root.store.server_domain+"/users/addToViewRecipe/",{recipeId:e,internalRecipe:n});case 1:return i.a(2)}}),i)})))()}}};var L=r(71241);const _=(0,L.A)(b,[["render",m],["__scopeId","data-v-f44f2a78"]]),R=_},97258:(e,n,r)=>{r.r(n),r.d(n,{default:()=>m});var i=r(56768),t=r(24232),s={class:"family-viewer-container"},a={key:0},c={key:1},l={class:"navigation-controls"},u=["disabled"],o=["disabled"];function p(e,n,r,p,d,v){var g=(0,i.g2)("RecipeViewPage");return(0,i.uX)(),(0,i.CE)("div",s,[n[3]||(n[3]=(0,i.Lk)("h1",{class:"mb-4"},"Family Recipes",-1)),v.currentRecipe?((0,i.uX)(),(0,i.CE)("div",c,[(0,i.Lk)("div",l,[(0,i.Lk)("button",{onClick:n[0]||(n[0]=function(){return v.previousRecipe&&v.previousRecipe.apply(v,arguments)}),disabled:d.recipes.length<=1}," ← Previous ",8,u),(0,i.Lk)("span",null,"Recipe "+(0,t.v_)(d.currentIndex+1)+" of "+(0,t.v_)(d.recipes.length),1),(0,i.Lk)("button",{onClick:n[1]||(n[1]=function(){return v.nextRecipe&&v.nextRecipe.apply(v,arguments)}),disabled:d.recipes.length<=1}," Next → ",8,o)]),((0,i.uX)(),(0,i.Wv)(g,{key:v.currentRecipe.id,"recipe-prop":v.currentRecipe},null,8,["recipe-prop"]))])):((0,i.uX)(),(0,i.CE)("div",a,n[2]||(n[2]=[(0,i.Lk)("p",null,"Loading family recipes or none found...",-1)])))])}var d=r(20908),v=r(30388),g=r(29953);const f={components:{RecipeViewPage:g["default"]},data:function(){return{recipes:[],currentIndex:0}},computed:{currentRecipe:function(){return this.recipes.length>0?this.recipes[this.currentIndex]:null}},created:function(){var e=this;return(0,v.A)((0,d.A)().m((function n(){var r,i;return(0,d.A)().w((function(n){while(1)switch(n.n){case 0:return n.p=0,n.n=1,e.axios.get(e.$root.store.server_domain+"/recipes/familyrecipes");case 1:r=n.v,200===r.status&&r.data.length>0?e.recipes=r.data:console.warn("Failed to fetch family recipes or list is empty."),n.n=3;break;case 2:n.p=2,i=n.v,console.error("Error fetching family recipes:",i);case 3:return n.a(2)}}),n,null,[[0,2]])})))()},methods:{nextRecipe:function(){this.currentIndex=(this.currentIndex+1)%this.recipes.length},previousRecipe:function(){this.currentIndex=(this.currentIndex-1+this.recipes.length)%this.recipes.length}}};var h=r(71241);const k=(0,h.A)(f,[["render",p],["__scopeId","data-v-10e40af2"]]),m=k}}]);
//# sourceMappingURL=258.878d318d.js.map